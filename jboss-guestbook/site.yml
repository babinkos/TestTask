# checking only on controller whis ansible installed, need 2.1+ because of modern syntax used
- hosts: 127.0.0.1
  pre_tasks:
    - name: Verify Ansible meets version requirements.
      assert:
        that: "ansible_version.full is version_compare('2.1', '>=')"
        msg: >
          "You must update Ansible to at least 2.1 to use this playbook"
                
- hosts: all
  name: Include all .json and .jsn files in vars/all and all nested directories (2.3)
  vars_files:
      - group_vars/all/params.json

- hosts: web-servers
  name: configure and deploy the webserver (jboss/wildfly)
  roles:
      - jboss

- name: deploy MySQL and configure the databases
  hosts: db-servers
  become: yes
  vars_files:
    - group_vars/db-servers/main.yml
  roles:
    - { role: geerlingguy.mysql }
    - mysql-gb-db

- hosts: web-servers
  name: configure and deploy the application code
  roles:
      - guestbookapp

